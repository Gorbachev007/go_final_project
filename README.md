
# README.md

## Описание проекта

Этот проект представляет собой веб-сервер, реализующий функциональность простейшего планировщика задач (аналог TODO-листа). С помощью этого сервера можно добавлять, редактировать, удалять задачи и отмечать их как выполненные. Каждая задача содержит дату дедлайна, заголовок, комментарий и правило повторения. Проект разработан для закрепления навыков написания веб-сервера на языке Go, работы с REST API и базами данных.

## Выполненные задания со звёздочкой

Все задания со звёздочкой были выполнены:
- Реализована поддержка всех правил повторения задач (ежедневные, ежегодные, еженедельные, ежемесячные).
- Поддержка аутентификации с использованием JWT-токенов.
- Поддержка переменных окружения для настройки сервера.
- Создан Dockerfile для контейнеризации приложения.

## Инструкция по запуску кода локально

1. **Клонирование репозитория**:
   ```bash
   git clone <URL репозитория>
   cd <имя директории репозитория>
   ```

2. **Установка Go**:
   Убедитесь, что у вас установлена версия Go 1.16 или выше. Скачать можно с [официального сайта Go](https://golang.org/dl/).

3. **Установка зависимостей и сборка проекта**:
   ```bash
   go mod tidy
   go build -o todo-server .
   ```

4. **Запуск сервера**:
   ```bash
   ./todo-server
   ```

   По умолчанию сервер будет запущен на порту `7540`. Если вы хотите использовать другой порт или базу данных, задайте переменные окружения `TODO_PORT` и `TODO_DBFILE` соответственно.

5. **Переменные окружения**:
   - `TODO_PORT`: Порт, на котором будет запущен сервер (по умолчанию `7540`).
   - `TODO_DBFILE`: Путь к файлу базы данных SQLite (по умолчанию `scheduler.db` в рабочей директории).
   - `TODO_PASSWORD`: Пароль для аутентификации пользователей (если не установлен, аутентификация не требуется).

6. **Пример запуска с переменными окружения**:
   ```bash
   export TODO_PORT=8080
   export TODO_DBFILE=/path/to/your/scheduler.db
   export TODO_PASSWORD=your_password_here
   ./todo-server
   ```

7. **Доступ к веб-интерфейсу**:
   - Откройте браузер и перейдите по адресу [http://localhost:7540](http://localhost:7540) (или другой порт, если он указан).

## Инструкция по запуску тестов

1. **Редактирование `tests/settings.go`**:
   Убедитесь, что переменные `DBFile`, `Port` и `Token` в файле `tests/settings.go` установлены правильно в зависимости от вашего окружения:
   - `DBFile` — путь к файлу базы данных.
   - `Port` — порт, на котором запущен сервер.
   - `Token` — JWT-токен, если используется аутентификация.

2. **Запуск тестов**:
   ```bash
   go test ./tests
   ```

   Тесты проверяют корректность работы всех реализованных функций API.

## Инструкция по сборке и запуску проекта через Docker

1. **Создание Docker-образа**:
   ```bash
   docker build -t todo-app .
   ```

2. **Запуск Docker-контейнера**:
   ```bash
   docker run -p 7540:7540 -v $(pwd)/scheduler.db:/app/scheduler.db -e TODO_PORT=7540 -e TODO_PASSWORD=your_password_here todo-app
   ```

   Этот запуск связывает локальный файл базы данных `scheduler.db` с контейнером, а также устанавливает переменные окружения для порта и пароля.

3. **Доступ к веб-интерфейсу**:
   - Откройте браузер и перейдите по адресу [http://localhost:7540](http://localhost:7540).
